<html lang="en" ng-app='taggers'>
  <head>
    <title>Tagger Web</title>
    <link rel="stylesheet" href="/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/css/bootstrap-3.1.1.min.css">

    <script src="/js/jquery-2.0.1.min.js"></script>
    <script src="/js/angular-1.2.13.min.js"></script>
    <script src="/js/ui-bootstrap-tpls-0.10.0.min.js"></script>
    <script src="/js/main.js"></script>

    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="-1">
  </head>
  <body>
    <div ng-controller="TaggersCtrl" class="container">
      <h1>Tagger Web <small>An engine for quickly writing extractors</small></h1>
      <div class="row">
        <div class="col-md-6">
          <form>
            <div class="panel panel-default">
              <div class="panel-body">
                <tabset>
                  <tab heading="Taggers">
                    <div>Enter taggers to run over the text:</div>
                    <textarea ng-model="taggersModel.taggers" rows='30'></textarea>
                  </tab>
                  <tab heading="Extractors">
                    <div>Enter extractors to run over the output types:</div>
                    <textarea ng-model="taggersModel.extractors" rows='30'></textarea>
                  </tab>
                  <tab heading="Sentences">
                    <div>Enter the sentences to run over:</div>
                    <textarea ng-model="taggersModel.sentences" rows='30'></textarea>
                  </tab>
                </tabset>

                <input ng-click="submit()" type="submit" value="Execute" class="btn btn-default">
              </div>
            </div>
          </form>
        </div>
        <div class="col-md-6">
          <div ng-hide='response'>
            Enter a tagger pattern and sentence, and then click 'Execute' to get started.
            Or, use <a ng-click='showExample()' href="#">an example</a>.

          </div>
          <div ng-show='response'>
            <div class="nav nav-pills nav-stacked">
              <li ng-repeat="sentence in response.sentences" ng-class="{active: $parent.sentence == sentence}">
                <a ng-click="$parent.sentence = sentence; $parent.level = sentence.levels[0]" href="#">{{ sentence.text }}</a>
              </li>
            </div>
            <div>
              <div class="panel panel-default">
                <div class="panel-body">
                  <h4>{{ sentence.text }}</h4>
                  <div ng-repeat="extractor in sentence.extractors">
                    <pre ng-if="extractor.extractions.length > 0">{{ extractor.extractions.join("\n") }}</pre>
                  </div>
                  <ul class="pagination">
                    <li ng-repeat="level in sentence.levels" ng-class="{active: $parent.level == level}">
                      <a ng-click='$parent.level = level' href="#">{{ level.name }}</a>
                    </li>
                  </ul>
                  <div class="tab-content">
                    <div>
                      <p ng-if="level.types.length == 0">No types found on this level.</p>
                      <pre ng-if="level.types.length > 0">{{ level.types.join("\n") }}</pre>
                      <table class="table table-bordered">
                        <tr>
                          <th>string</th>
                          <th>lemma</th>
                          <th>postag</th>
                          <th>chunk</th>
                          <th>in types</th>
                          <th>out types</th>
                        </tr>
                        <tr ng-repeat="token in level.tokens" ng-class="{info: token.consumed}">
                          <td>{{ token.text }}</td>
                          <td>{{ token.lemma }}</td>
                          <td>{{ token.postag }}</td>
                          <td>{{ token.chunk }}</td>
                          <td><span popover-title="Input Types" popover-html="true" popover-trigger="mouseenter" popover-placement="bottom" popover='{{ token.inputTypes.join(" ") }}'>{{ token.inputTypes.slice(-1)[0] || "" }}</span></td>
                          <td><span popover-title="Output Types" popover-html="true" popover-trigger="mouseenter" popover-placement="bottom" popover='{{ token.outputTypes.join(" ") }}'>{{ token.outputTypes.slice(-1)[0] || "" }}</span></td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <details>
              <summary>Json Response</summary>
              <p><pre>{{ responseString }}</pre></p>
            </details>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
